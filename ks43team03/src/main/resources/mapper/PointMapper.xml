<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ksmart42.khtour.mapper.PointMapper">
	<resultMap	type="Point" 					id="pointResultMap">
		<!-- apply_point 누적 포인트 내역 -->
		<id 	column="apply_point_cd" 		property="applyPointCd" />
		<result column="user_id" 				property="userId" /> 			
		<result column="event_detail" 			property="eventDetail" /> 			
		<result column="apply_point_amount" 	property="applyPointAmount" /> 		
		<result column="apply_date" 			property="applyDate" /> 			
		<result column="apply_point_group_cd"	property="applyPointGroupCd" /> 	
		<!-- total_point 총 포인트 -->
		<result column="total_point"			property="totalPoint" />			
		<result column="point_update_date"		property="pointUpdateDate" />			
	</resultMap>
	
	<!-- 회원 포인트 조회 -->
	<select id="getPointList" parameterType="String" resultMap="pointResultMap">
		SELECT 
			a.user_id
			, a.event_detail
			, a.apply_point_amount
			, a.apply_date
			,t.total_point
		FROM 
			total_point AS t
		INNER JOIN
			apply_point AS a
		ON
			t.user_id = a.user_id
		WHERE 
			t.user_id = #{userId};
	</select>

</mapper>