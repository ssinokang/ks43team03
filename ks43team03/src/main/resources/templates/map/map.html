<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/default.html}">

	<!-- 사용자 정의 js 선언 -->
	<th:block layout:fragment="customJs">
		<script type="text/javascript" th:src="@{/js/jquery-3.6.0.min.js}"></script>
		<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=9c5dbc5a281ccc90ee278e75316bee9c&libraries=services,clusterer,drawing"></script>
	</th:block>
	
	<!-- 사용자 정의 css 선언 -->
	<th:block layout:fragment="customCss">
		<style>
			.map_wrap, .map_wrap * {margin:0;padding:0;font-family:'Malgun Gothic',dotum,'돋움',sans-serif;font-size:12px;}
			.map_wrap a, .map_wrap a:hover, .map_wrap a:active{color:#000;text-decoration: none;}
			.map_wrap {position:relative;width:100%;height:500px;}
			#menu_wrap {position:absolute;top:0;left:0;bottom:0;width:250px;margin:10px 0 30px 10px;padding:5px;overflow-y:auto;background:rgba(255, 255, 255, 0.7);z-index: 1;font-size:12px;border-radius: 10px;}
			.bg_white {background:#fff;}
			#menu_wrap hr {display: block; height: 1px;border: 0; border-top: 2px solid #5F5F5F;margin:3px 0;}
			#menu_wrap .option{text-align: center;}
			#menu_wrap .option p {margin:10px 0;}  
			#menu_wrap .option button {margin-left:5px;}
			#placesList li {list-style: none;}
			#placesList .item {position:relative;border-bottom:1px solid #888;overflow: hidden;cursor: pointer;min-height: 65px;}
			#placesList .item span {display: block;margin-top:4px;}
			#placesList .item h5, #placesList .item .info {text-overflow: ellipsis;overflow: hidden;white-space: nowrap;}
			#placesList .item .info{padding:10px 0 10px 55px;}
			#placesList .info .gray {color:#8a8a8a;}
			#placesList .info .jibun {padding-left:26px;background:url(https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/places_jibun.png) no-repeat;}
			#placesList .info .tel {color:#009900;}
			#placesList .item .markerbg {float:left;position:absolute;width:36px; height:37px;margin:10px 0 0 10px;background:url(https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_blue.png) no-repeat;}
			#placesList .item .marker_1 {background-position: 0 -10px;}
			#placesList .item .marker_2 {background-position: 0 -56px;}
			#placesList .item .marker_3 {background-position: 0 -102px}
			#placesList .item .marker_4 {background-position: 0 -148px;}
			#placesList .item .marker_5 {background-position: 0 -194px;}
			#placesList .item .marker_6 {background-position: 0 -240px;}
			#placesList .item .marker_7 {background-position: 0 -286px;}
			#placesList .item .marker_8 {background-position: 0 -332px;}
			#placesList .item .marker_9 {background-position: 0 -378px;}
			#placesList .item .marker_10 {background-position: 0 -423px;}
			#placesList .item .marker_11 {background-position: 0 -470px;}
			#placesList .item .marker_12 {background-position: 0 -516px;}
			#placesList .item .marker_13 {background-position: 0 -562px;}
			#placesList .item .marker_14 {background-position: 0 -608px;}
			#placesList .item .marker_15 {background-position: 0 -654px;}
			#pagination {margin:10px auto;text-align: center;}
			#pagination a {display:inline-block;margin-right:10px;}
			#pagination .on {font-weight: bold; cursor: default;color:#777;}
		</style>
	</th:block>
	
	<!-- 사용자 정의 contents -->
	<th:block layout:fragment="customContents">
		<div class="container">
			<div class="map_wrap">
				<div id="map" style="width:100%;height:100%;position:relative;overflow:hidden;"></div>
			
				<div id="menu_wrap" class="bg_white">
					<div class="option">
						<div>
							<form onsubmit="searchPlaces(); return false;">
								키워드 : <input type="text" id="keyword" size="15"> 
								<button type="submit">검색하기</button> 
							</form>
						</div>
					</div>
					<hr>
					<ul id="placesList"></ul>
					<div id="pagination"></div>
				</div>
			</div>
		
		
			
			<!-- <p style="margin-top:-12px">
			    사용한 데이터를 보시려면 
			    <em class="link">
			       <a href="/download/web/data/chicken.json" target="_blank">여기를 클릭하세요!</a>
			    </em>
			</p>
			<div id="map" style="width:100%;height:350px;"></div> -->
		
		</div>
		
		<script>
		    /* var map = new kakao.maps.Map(document.getElementById('map'), { // 지도를 표시할 div
		        center : new kakao.maps.LatLng(36.2683, 127.6358), // 지도의 중심좌표 
		        level : 14 // 지도의 확대 레벨 
		    });
		    
		    // 마커 클러스터러를 생성합니다 
		    var clusterer = new kakao.maps.MarkerClusterer({
		        map: map, // 마커들을 클러스터로 관리하고 표시할 지도 객체 
		        averageCenter: true, // 클러스터에 포함된 마커들의 평균 위치를 클러스터 마커 위치로 설정 
		        minLevel: 10 // 클러스터 할 최소 지도 레벨 
		    });
		 	
		    var clustererPlace = {
		    	  positions: [
		    	    {
		    	      lat: 37.27943075229118,
		    	      lng: 127.01763998406159
		    	    },
		    	    {
		    	      lat: 37.55915668706214,
		    	      lng: 126.92536526611102
		    	    },
		    	    {
		    	      lat: 35.13854258261161,
		    	      lng: 129.1014781294671
		    	    },
		    	    {
		    	      lat: 37.55518388656961,
		    	      lng: 126.92926237742505
		    	    },
		    	    {
		    	      lat: 35.20618517638034,
		    	      lng: 129.07944301057026
		    	    },
		    	    {
		    	      lat: 37.561110808242056,
		    	      lng: 126.9831268386891
		    	    },
		    	    {
		    	      lat: 37.86187129655063,
		    	      lng: 127.7410250820423
		    	    },
		    	    {
		    	      lat: 37.47160156778542,
		    	      lng: 126.62818064142286
		    	    },
		    	    {
		    	      lat: 35.10233410927457,
		    	      lng: 129.02611815856181
		    	    },
		    	    {
		    	      lat: 35.10215562270429,
		    	      lng: 129.02579793018205
		    	    },
		    	    {
		    	      lat: 35.475423012251106,
		    	      lng: 128.76666923366042
		    	    },
		    	    {
		    	      lat: 35.93282824693927,
		    	      lng: 126.95307628834287
		    	    },
		    	    {
		    	      lat: 36.33884892276137,
		    	      lng: 127.393666019664
		    	    },
		    	    {
		    	      lat: 37.520412849636,
		    	      lng: 126.9742764161581
		    	    },
		    	    {
		    	      lat: 35.155139675209675,
		    	      lng: 129.06154773758374
		    	    },
		    	    {
		    	      lat: 35.816041994696576,
		    	      lng: 127.11046706211324
		    	    },
		    	    {
		    	      lat: 38.20441110638504,
		    	      lng: 128.59038671285234
		    	    },
		    	    {
		    	      lat: 37.586112739308916,
		    	      lng: 127.02949148517999
		    	    },
		    	    {
		    	      lat: 37.50380641844987,
		    	      lng: 127.02130716617751
		    	    },
		    	    {
		    	      lat: 37.55155704387368,
		    	      lng: 126.92161115892036
		    	    },
		    	    {
		    	      lat: 37.55413060051369,
		    	      lng: 126.92207472929526
		    	    },
		    	    {
		    	      lat: 36.362321615174835,
		    	      lng: 127.35000483225389
		    	    },
		    	    {
		    	      lat: 37.55227862908755,
		    	      lng: 126.92280546294998
		    	    },
		    	    {
		    	      lat: 37.490413948014606,
		    	      lng: 127.02079678472444
		    	    },
		    	    {
		    	      lat: 35.172358507549596,
		    	      lng: 126.90545394866643
		    	    },
		    	    {
		    	      lat: 35.15474103200252,
		    	      lng: 129.11827889154455
		    	    },
		    	    {
		    	      lat: 37.516081250973485,
		    	      lng: 127.02369057166361
		    	    },
		    	    {
		    	      lat: 36.80711722863776,
		    	      lng: 127.14020346037576
		    	    },
		    	    {
		    	      lat: 37.28957415752673,
		    	      lng: 127.00103752005424
		    	    },
		    	    {
		    	      lat: 35.83953896766896,
		    	      lng: 128.7566880321854
		    	    },
		    	    {
		    	      lat: 37.51027412948879,
		    	      lng: 127.08227718124704
		    	    },
		    	    {
		    	      lat: 37.493581783270294,
		    	      lng: 126.72541955660554
		    	    },
		    	    {
		    	      lat: 35.135291862962795,
		    	      lng: 129.10060911448775
		    	    },
		    	    {
		    	      lat: 35.174574933144065,
		    	      lng: 126.91389980787773
		    	    },
		    	    {
		    	      lat: 37.795887691878654,
		    	      lng: 127.10660416587146
		    	    },
		    	    {
		    	      lat: 37.59288687521181,
		    	      lng: 126.96560524627377
		    	    },
		    	    {
		    	      lat: 37.45076411130452,
		    	      lng: 127.14593003749792
		    	    },
		    	    {
		    	      lat: 35.86008337557079,
		    	      lng: 127.1263912488061
		    	    },
		    	    {
		    	      lat: 35.23773491330953,
		    	      lng: 129.08371037429578
		    	    },
		    	    {
		    	      lat: 37.524297321304886,
		    	      lng: 127.05018281937049
		    	    },
		    	    {
		    	      lat: 36.33386658021849,
		    	      lng: 127.4461721466889
		    	    },
		    	    {
		    	      lat: 35.72963747546802,
		    	      lng: 128.27079056365005
		    	    },
		    	    {
		    	      lat: 36.02726828142973,
		    	      lng: 129.37257233594056
		    	    },
		    	    {
		    	      lat: 35.0708030360945,
		    	      lng: 129.0593185494088
		    	    },
		    	    {
		    	      lat: 35.86835862950247,
		    	      lng: 128.59755089175871
		    	    },
		    	    {
		    	      lat: 33.51133264696746,
		    	      lng: 126.51852347452322
		    	    },
		    	    {
		    	      lat: 37.61284289586752,
		    	      lng: 127.03120547238589
		    	    },
		    	    {
		    	      lat: 35.851696038722466,
		    	      lng: 128.59092937125666
		    	    },
		    	    {
		    	      lat: 37.59084695083232,
		    	      lng: 127.01872773588882
		    	    },
		    	    {
		    	      lat: 35.52114874288784,
		    	      lng: 129.33573629945764
		    	    },
		    	    {
		    	      lat: 36.362326407439845,
		    	      lng: 127.33577420148076
		    	    },
		    	    {
		    	      lat: 37.28941189110747,
		    	      lng: 127.00446132665141
		    	    },
		    	    {
		    	      lat: 35.32049801117398,
		    	      lng: 129.1810343576788
		    	    },
		    	    {
		    	      lat: 37.53338631541601,
		    	      lng: 127.00615481678061
		    	    },
		    	    {
		    	      lat: 37.413461468258156,
		    	      lng: 126.67735680840826
		    	    },
		    	    {
		    	      lat: 35.920390371093205,
		    	      lng: 128.54411720249956
		    	    },
		    	    {
		    	      lat: 36.65489374054824,
		    	      lng: 127.48374816871991
		    	    },
		    	    {
		    	      lat: 37.49491987110441,
		    	      lng: 127.01493134206048
		    	    },
		    	    {
		    	      lat: 37.64985695608336,
		    	      lng: 127.14496345268074
		    	    },
		    	    {
		    	      lat: 37.55686770317417,
		    	      lng: 127.16927880543041
		    	    },
		    	    {
		    	      lat: 37.37014007589146,
		    	      lng: 127.10614330185591
		    	    },
		    	    {
		    	      lat: 37.5350236507627,
		    	      lng: 126.96157681184789
		    	    },
		    	    {
		    	      lat: 37.40549630594667,
		    	      lng: 126.8980581820004
		    	    },
		    	    {
		    	      lat: 34.867950544005744,
		    	      lng: 128.69069690081176
		    	    },
		    	    {
		    	      lat: 35.16317059543225,
		    	      lng: 128.98452978748048
		    	    },
		    	    {
		    	      lat: 36.607484825953186,
		    	      lng: 127.48520451195111
		    	    },
		    	    {
		    	      lat: 37.651724785213986,
		    	      lng: 126.58306748337554
		    	    },
		    	    {
		    	      lat: 35.86059690063427,
		    	      lng: 128.59193087665244
		    	    },
		    	    {
		    	      lat: 35.25685847585025,
		    	      lng: 128.59912605060455
		    	    },
		    	    {
		    	      lat: 33.509258155694496,
		    	      lng: 126.5109451464813
		    	    },
		    	    {
		    	      lat: 37.64366155701157,
		    	      lng: 126.63255039247507
		    	    },
		    	    {
		    	      lat: 35.82667262227336,
		    	      lng: 127.1030670574823
		    	    },
		    	    {
		    	      lat: 35.82003554991111,
		    	      lng: 127.14810974062483
		    	    },
		    	    {
		    	      lat: 35.097485195649455,
		    	      lng: 128.99486181862338
		    	    },
		    	    {
		    	      lat: 37.32204249590605,
		    	      lng: 127.95591893585816
		    	    },
		    	    {
		    	      lat: 37.50535127272031,
		    	      lng: 127.1047465440526
		    	    },
		    	    {
		    	      lat: 36.99081407156533,
		    	      lng: 127.09338324956647
		    	    },
		    	    {
		    	      lat: 37.323486640444834,
		    	      lng: 127.12285239871076
		    	    },
		    	    {
		    	      lat: 35.78973089440451,
		    	      lng: 127.13644319545601
		    	    },
		    	    {
		    	      lat: 35.641373953578196,
		    	      lng: 129.35463220719618
		    	    },
		    	    {
		    	      lat: 37.47423127310911,
		    	      lng: 126.97625029161996
		    	    },
		    	    {
		    	      lat: 35.84357192991226,
		    	      lng: 128.61143720719716
		    	    },
		    	    {
		    	      lat: 37.180974984085736,
		    	      lng: 128.20294526341132
		    	    },
		    	    {
		    	      lat: 37.57895718642583,
		    	      lng: 126.9316897337244
		    	    },
		    	    {
		    	      lat: 33.49077253755052,
		    	      lng: 126.49314817000993
		    	    },
		    	    {
		    	      lat: 36.42175925330255,
		    	      lng: 128.67409133225766
		    	    },
		    	    {
		    	      lat: 37.46405540570109,
		    	      lng: 126.7153544119173
		    	    },
		    	    {
		    	      lat: 37.594758776232126,
		    	      lng: 127.10099917489818
		    	    },
		    	    {
		    	      lat: 37.7239966558994,
		    	      lng: 127.0478671731854
		    	    },
		    	    {
		    	      lat: 35.86680171505329,
		    	      lng: 128.5923738376741
		    	    },
		    	    {
		    	      lat: 37.560573727266785,
		    	      lng: 126.81239107485251
		    	    },
		    	    {
		    	      lat: 37.78692224857484,
		    	      lng: 126.98966010341789
		    	    },
		    	    {
		    	      lat: 35.10368644802913,
		    	      lng: 129.0206862606022
		    	    },
		    	    {
		    	      lat: 37.063839948992644,
		    	      lng: 127.06856523030079
		    	    },
		    	    {
		    	      lat: 37.34344643728643,
		    	      lng: 127.94382181350932
		    	    },
		    	    {
		    	      lat: 37.512521267219064,
		    	      lng: 127.40054805648133
		    	    },
		    	    {
		    	      lat: 35.15286653837983,
		    	      lng: 126.90419903971498
		    	    },
		    	    {
		    	      lat: 35.173238445546296,
		    	      lng: 129.176082844468
		    	    },
		    	    {
		    	      lat: 36.082394201323524,
		    	      lng: 129.40330471725923
		    	    },
		    	    {
		    	      lat: 37.51043665598106,
		    	      lng: 127.03974070036524
		    	    },
		    	    {
		    	      lat: 36.627816673285054,
		    	      lng: 127.44969866021904
		    	    },
		    	    {
		    	      lat: 37.59194624756919,
		    	      lng: 127.01817545576053
		    	    },
		    	    {
		    	      lat: 37.387147045560866,
		    	      lng: 127.1253365438929
		    	    },
		    	    {
		    	      lat: 35.89948383848115,
		    	      lng: 128.60809550730653
		    	    },
		    	    {
		    	      lat: 37.555316235235324,
		    	      lng: 127.14038447894715
		    	    },
		    	    {
		    	      lat: 36.09622092762977,
		    	      lng: 128.43314679004078
		    	    },
		    	    {
		    	      lat: 37.582855922985544,
		    	      lng: 126.91907857008522
		    	    },
		    	    {
		    	      lat: 37.516000983841586,
		    	      lng: 128.72798872032757
		    	    },
		    	    {
		    	      lat: 37.48429363675198,
		    	      lng: 127.0379630203579
		    	    },
		    	    {
		    	      lat: 37.54502575965604,
		    	      lng: 126.95429338245707
		    	    },
		    	    {
		    	      lat: 35.236247173046394,
		    	      lng: 128.8677618015292
		    	    },
		    	    {
		    	      lat: 37.40157536691968,
		    	      lng: 127.11717457214067
		    	    },
		    	    {
		    	      lat: 36.95191038001258,
		    	      lng: 127.91064040877527
		    	    },
		    	    {
		    	      lat: 37.491526492971346,
		    	      lng: 126.85463749525812
		    	    },
		    	    {
		    	      lat: 36.124356479753196,
		    	      lng: 128.09517052346138
		    	    },
		    	    {
		    	      lat: 37.15715169307048,
		    	      lng: 128.15853461363773
		    	    },
		    	    {
		    	      lat: 37.5808156608605,
		    	      lng: 126.95109705510639
		    	    },
		    	    {
		    	      lat: 37.46931787249714,
		    	      lng: 126.89904775044873
		    	    },
		    	    {
		    	      lat: 35.52195614910054,
		    	      lng: 129.3209904841746
		    	    },
		    	    {
		    	      lat: 37.58625703195563,
		    	      lng: 126.9496035206742
		    	    },
		    	    {
		    	      lat: 37.28463639199199,
		    	      lng: 126.85984474757359
		    	    },
		    	    {
		    	      lat: 35.534169458631226,
		    	      lng: 129.31169021536095
		    	    },
		    	    {
		    	      lat: 37.553341234194285,
		    	      lng: 127.15481222237025
		    	    },
		    	    {
		    	      lat: 37.62293367990081,
		    	      lng: 126.83445005122417
		    	    },
		    	    {
		    	      lat: 35.5272027005698,
		    	      lng: 127.72953798950101
		    	    },
		    	    {
		    	      lat: 35.180032285898854,
		    	      lng: 128.06954509175367
		    	    }
		    	  ]
		    	};
		    
		        // 좌표 값을 가지고 마커를 표시합니다
		        // 마커 클러스터러로 관리할 마커 객체는 생성할 때 지도 객체를 설정하지 않습니다
		        var markers = $(clustererPlace.positions).map(function(i, position) {
		        	
		            return new kakao.maps.Marker({
		                position : new kakao.maps.LatLng(position.lat, position.lng)
		            });
		        });
				
		        console.log(markers);
		        
		        // 클러스터러에 마커들을 추가합니다
		        clusterer.addMarkers(markers);
				
		        console.log(clusterer); */
		        
			// 마커를 담을 배열입니다
			var markers = [];
	
			var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
				mapOption = {
					center: new kakao.maps.LatLng(37.566826, 126.9786567), // 지도의 중심좌표
					level: 3 // 지도의 확대 레벨
				};  
	
			// 지도를 생성합니다    
			var map = new kakao.maps.Map(mapContainer, mapOption); 
	
			// 장소 검색 객체를 생성합니다
			var ps = new kakao.maps.services.Places();  
	
			// 검색 결과 목록이나 마커를 클릭했을 때 장소명을 표출할 인포윈도우를 생성합니다
			var infowindow = new kakao.maps.InfoWindow({zIndex:1});
	
			// 키워드로 장소를 검색합니다
			searchPlaces();
	
			// 키워드 검색을 요청하는 함수입니다
			function searchPlaces() {
	
				var keyword = document.getElementById('keyword').value;
				
				// 장소검색 객체를 통해 키워드로 장소검색을 요청합니다
				ps.keywordSearch( keyword, placesSearchCB); 
			}
	
			// 장소검색이 완료됐을 때 호출되는 콜백함수 입니다
			function placesSearchCB(data, status, pagination) {
				if (status === kakao.maps.services.Status.OK) {
					
					console.log(data);
					// 정상적으로 검색이 완료됐으면
					// 검색 목록과 마커를 표출합니다
					displayPlaces(data);
	
					// 페이지 번호를 표출합니다
					displayPagination(pagination);
	
				} else if (status === kakao.maps.services.Status.ZERO_RESULT) {
	
					alert('검색 결과가 존재하지 않습니다.');
					return;
	
				} else if (status === kakao.maps.services.Status.ERROR) {
	
					alert('검색 결과 중 오류가 발생했습니다.');
					return;
	
				}
			}
	
			// 검색 결과 목록과 마커를 표출하는 함수입니다
			function displayPlaces(places) {
	
				var listEl = document.getElementById('placesList'), 
				menuEl = document.getElementById('menu_wrap'),
				fragment = document.createDocumentFragment(), 
				bounds = new kakao.maps.LatLngBounds(), 
				listStr = '';
			    
				// 검색 결과 목록에 추가된 항목들을 제거합니다
				removeAllChildNods(listEl);
	
				// 지도에 표시되고 있는 마커를 제거합니다
				removeMarker();
				
				for ( var i=0; i<places.length; i++ ) {
	
					// 마커를 생성하고 지도에 표시합니다
					var placePosition = new kakao.maps.LatLng(places[i].y, places[i].x),
						marker = addMarker(placePosition, i), 
						itemEl = getListItem(i, places[i]); // 검색 결과 항목 Element를 생성합니다
	
					// 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
					// LatLngBounds 객체에 좌표를 추가합니다
					bounds.extend(placePosition);
	
					// 마커와 검색결과 항목에 mouseover 했을때
					// 해당 장소에 인포윈도우에 장소명을 표시합니다
					// mouseout 했을 때는 인포윈도우를 닫습니다
					(function(marker, title) {
						kakao.maps.event.addListener(marker, 'mouseover', function() {
							displayInfowindow(marker, title);
						});
	
						kakao.maps.event.addListener(marker, 'mouseout', function() {
							infowindow.close();
						});
	
						itemEl.onmouseover =  function () {
							displayInfowindow(marker, title);
						};
	
						itemEl.onmouseout =  function () {
							infowindow.close();
						};
					})(marker, places[i].place_name);
	
					fragment.appendChild(itemEl);
				}
	
				// 검색결과 항목들을 검색결과 목록 Element에 추가합니다
				listEl.appendChild(fragment);
				menuEl.scrollTop = 0;
	
				// 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다
				map.setBounds(bounds);
			}
	
			// 검색결과 항목을 Element로 반환하는 함수입니다
			function getListItem(index, places) {
	
				var el = document.createElement('li'),
				itemStr = '<span class="markerbg marker_' + (index+1) + '"></span>' +
							'<div class="info">' +
							'   <h5>' + places.place_name + '</h5>';
	
				if (places.road_address_name) {
					itemStr += '    <span>' + places.road_address_name + '</span>' +
								'   <span class="jibun gray">' +  places.address_name  + '</span>';
				} else {
					itemStr += '    <span>' +  places.address_name  + '</span>'; 
				}
			                 
					itemStr += '  <span class="tel">' + places.phone  + '</span>' +
								'</div>';           
	
				el.innerHTML = itemStr;
				el.className = 'item';
	
				return el;
			}
	
			// 마커를 생성하고 지도 위에 마커를 표시하는 함수입니다
			function addMarker(position, idx, title) {
				var imageSrc = 'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_blue.png', // 마커 이미지 url, 스프라이트 이미지를 씁니다
					imageSize = new kakao.maps.Size(36, 37),  // 마커 이미지의 크기
					imgOptions =  {
						spriteSize : new kakao.maps.Size(36, 691), // 스프라이트 이미지의 크기
						spriteOrigin : new kakao.maps.Point(0, (idx*46)+10), // 스프라이트 이미지 중 사용할 영역의 좌상단 좌표
						offset: new kakao.maps.Point(13, 37) // 마커 좌표에 일치시킬 이미지 내에서의 좌표
					},
					markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),
						marker = new kakao.maps.Marker({
						position: position, // 마커의 위치
						image: markerImage 
					});
	
				marker.setMap(map); // 지도 위에 마커를 표출합니다
				markers.push(marker);  // 배열에 생성된 마커를 추가합니다
	
				return marker;
			}
	
			// 지도 위에 표시되고 있는 마커를 모두 제거합니다
			function removeMarker() {
				for ( var i = 0; i < markers.length; i++ ) {
					markers[i].setMap(null);
				}   
				markers = [];
			}
	
			// 검색결과 목록 하단에 페이지번호를 표시는 함수입니다
			function displayPagination(pagination) {
				var paginationEl = document.getElementById('pagination'),
					fragment = document.createDocumentFragment(),
					i; 
	
				// 기존에 추가된 페이지번호를 삭제합니다
				while (paginationEl.hasChildNodes()) {
					paginationEl.removeChild (paginationEl.lastChild);
				}
	
				for (i=1; i<=pagination.last; i++) {
					var el = document.createElement('a');
					el.href = "#";
					el.innerHTML = i;
	
					if (i===pagination.current) {
						el.className = 'on';
					} else {
						el.onclick = (function(i) {
							return function() {
								pagination.gotoPage(i);
							}
						})(i);
					}
	
					fragment.appendChild(el);
				}
				paginationEl.appendChild(fragment);
			}
	
			// 검색결과 목록 또는 마커를 클릭했을 때 호출되는 함수입니다
			// 인포윈도우에 장소명을 표시합니다
			function displayInfowindow(marker, title) {
				var content = '<div style="padding:5px;z-index:1;">' + title + '</div>';
	
				infowindow.setContent(content);
				infowindow.open(map, marker);
			}
	
			 // 검색결과 목록의 자식 Element를 제거하는 함수입니다
			function removeAllChildNods(el) {   
				while (el.hasChildNodes()) {
					el.removeChild (el.lastChild);
				}
			}
		</script>

</html>